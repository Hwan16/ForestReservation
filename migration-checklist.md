# 마이그레이션 체크리스트

## SQLite에서 Supabase로 마이그레이션 검증

### 데이터 스키마 마이그레이션
- [ ] Drizzle 스키마가 Supabase에 적용되었는지 확인
- [ ] 모든 테이블과 컬럼이 올바르게 생성되었는지 확인
- [ ] 테이블 간 관계(외래 키)가 올바르게 설정되었는지 확인
- [ ] 인덱스가 적절하게 생성되었는지 확인

### 데이터 마이그레이션
- [ ] 기존 사용자 데이터가 손실 없이 마이그레이션되었는지 확인
- [ ] 기존 예약 데이터가 올바르게 마이그레이션되었는지 확인
- [ ] 가용성 데이터가 올바르게 마이그레이션되었는지 확인
- [ ] 데이터 타입 변환으로 인한 문제가 없는지 확인 (날짜/시간 형식 등)

### API 검증
- [ ] 모든 API 엔드포인트가 Supabase와 연동되어 작동하는지 확인
- [ ] 기존 API 응답 형식이 유지되는지 확인
- [ ] 응답 시간이 허용 가능한 범위인지 확인
- [ ] 에러 처리 및 예외 상황 대응이 적절한지 확인

### 인증 시스템 검증
- [ ] Supabase Auth로 사용자 로그인이 정상 작동하는지 확인
- [ ] 세션 관리가 올바르게 동작하는지 확인
- [ ] 권한 제어(일반 사용자/관리자)가 올바르게 적용되는지 확인
- [ ] 토큰 갱신 메커니즘이 정상 작동하는지 확인

### 트랜잭션 처리 검증
- [ ] 예약 생성 트랜잭션이 올바르게 동작하는지 확인
- [ ] 가용성 업데이트 트랜잭션이 올바르게 동작하는지 확인
- [ ] 에러 발생 시 롤백이 제대로 이루어지는지 확인

## 롤백 계획

### 롤백 트리거 조건
1. 데이터 불일치/손상 발견
2. 심각한 성능 문제 발생
3. 보안 취약점 발견
4. 중요 기능 장애 발생

### 롤백 절차
1. 백업된 SQLite 데이터베이스 파일 복원
2. 이전 API 엔드포인트로 되돌리기
3. 이전 인증 시스템 사용하도록 되돌리기
4. 환경 변수 설정 복원

### 롤백 사전 준비
- [ ] 마이그레이션 전 SQLite 데이터베이스 백업
- [ ] 기존 코드베이스 별도 브랜치로 보존
- [ ] 환경 변수 설정 백업
- [ ] 롤백 테스트 수행 및 검증 